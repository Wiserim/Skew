/*!
* Skew v0.3
* Copyright 2018 Marcin Walczak
*This file is part of Skew which is released under MIT license.
*See LICENSE for full license details.
*/
window.jQuery&&($.fn.skew=function(a){$.makeArray(arguments);return this.each(function(){var b=$.data(this,"skewjs");if(b)if("string"==typeof a)b[a]?(b[a].apply(b,d),"destroy"==a&&$.removeData(this,"skewjs")):$.error("Method "+a+" does not exist on Skew");else{var d=$.extend({x:0,y:0,breakpoints:[]},a);b.update(d)}else if("string"!==typeof a)return d=$.extend({x:0,y:0,breakpoints:[]},a),b=new Skew(this,d),$.data(this,"skewjs",b),b})});
function Skew(a,b){this.targets="string"==typeof a?document.querySelectorAll(a):a.nodeType?[a]:a;b=this.parseSettings(b);this.x=b.x;this.y=b.y;this.breakpoints=b.breakpoints;this.skew();var d=this;this.resizeEvent=function(){d.skew()};window.addEventListener("resize",this.resizeEvent);return this}
Skew.prototype={skew:function(){for(var a=0;a<this.targets.length;a++){var b=this.targets[a],d=b.offsetWidth,c=b.offsetHeight,g=this.x,k=this.y;if(void 0!==this.breakpoints){var l=window.innerWidth;this.breakpoints.forEach(function(a){a["break"]>=l&&(g=a.x,k=a.y)})}skewXAngle=Math.atan(g/c);skewYAngle=Math.atan(k/d);d="skew("+skewXAngle+"rad, "+skewYAngle+"rad)";c=b.getAttribute("style");if(null===c)c="transform: "+d+";";else{var e=c.indexOf("transform:");if(0>e)c+="transform: "+d+";";else{var f=
e+c.substring(e).indexOf(";");f<e&&(f=c.length,d+=";");e=c.indexOf("skew");var h=c.substring(0,f);f=c.substring(f);0>e?c=h+" "+d+f:(e=c.indexOf("skew"),f=e+c.substring(e).indexOf(")")+1,h=c.substring(0,e),f=c.substring(f),c=h+d+f)}}b.setAttribute("style",c)}return this},update:function(a){a=this.parseSettings(a);this.x=void 0!==a.x?a.x:0;this.y=void 0!==a.y?a.y:0;this.breakpoints=void 0!==a.breakpoints?a.breakpoints:0;this.skew();return this},destroy:function(){window.removeEventListener("resize",
this.resizeEvent);for(var a=0;a<this.targets.length;a++){var b=this.targets[a],d=b.getAttribute("style"),c=d.indexOf("skew"),g=c+d.substring(c).indexOf(")")+1;-1<c&&(c=d.substring(0,c),d=d.substring(g),b.setAttribute("style",c+d))}},parseSettings:function(a){var b={x:0,y:0,breakpoints:[]};void 0!==a&&(b.x=void 0!==a.x?a.x:0,b.y=void 0!==a.y?a.y:0,b.breakpoints=[],Array.isArray(a.breakpoints)&&a.breakpoints.forEach(function(a){b.breakpoints.push({"break":void 0!==a["break"]?a["break"]:0,x:void 0!==
a.x?a.x:0,y:void 0!==a.y?a.y:0})}));return b}};
