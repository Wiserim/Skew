/*!
* Skew v0.5
* Copyright 2018 Marcin Walczak
*This file is part of Skew which is released under MIT license.
*See LICENSE for full license details.
*/
function Skew(e,t){"string"==typeof e?this.targets=document.querySelectorAll(e):e.nodeType?this.targets=[e]:this.targets=e,this.defaults={x:0,y:0,breakpoints:[],debounce:!0,debounceTime:50},this.options=this.defaults,this.timeout,this.update(t),this.skew();var i=this;return this.eventMethod=function(){var e=i.options.debounce,t=i.options.debounceTime;if(void 0!==i.options.breakpoints){var s=window.innerWidth;i.options.breakpoints.forEach(function(i){i.break>=s&&(void 0!==i.debounce&&(e=i.debounce),void 0!==i.debounceTime&&(t=i.debounceTime))})}if(e){clearTimeout(i.timeout),i.timeout=setTimeout(function(){i.timeout=null,i.skew()},t)}else i.skew()},window.addEventListener("load",this.eventMethod),window.addEventListener("resize",this.eventMethod),this}window.jQuery&&($.fn.skew=function(e){$.makeArray(arguments);return this.each(function(){var t=$.data(this,"skewjs");if(t)if("string"==typeof e)t[e]?(t[e].apply(t,i),"destroy"==e&&$.removeData(this,"skewjs")):$.error("Method "+e+" does not exist on Skew");else{var i=$.extend({x:0,y:0,breakpoints:[]},e);t.update(i)}else if("string"!=typeof e){var s=new Skew(this,i=$.extend({x:0,y:0,breakpoints:[]},e));return $.data(this,"skewjs",s),s}})}),Skew.prototype={skew:function(){for(var e=this,t=0;t<e.targets.length;t++){var i=e.targets[t],s=i.offsetWidth,n=i.offsetHeight,o=e.options.x,r=e.options.y;if(void 0!==e.options.breakpoints){var a=window.innerWidth;e.options.breakpoints.forEach(function(e){e.break>=a&&(void 0!==e.x&&(o=e.x),void 0!==e.y&&(r=e.y))})}skewXAngle=Math.atan(o/n),skewYAngle=Math.atan(r/s);var d="skew("+skewXAngle+"rad, "+skewYAngle+"rad)",u=i.getAttribute("style");if(null!==u){var b=u.indexOf("transform:");if(b<0)u+="transform: "+d+";",i.setAttribute("style",u);else{var h=b+u.substring(b).indexOf(";");h<b&&(h=u.length,d+=";");var f=u.indexOf("skew"),v=u.substring(0,h),c=u.substring(h);f<0?(u=v+" "+d+c,i.setAttribute("style",u)):(h=(b=u.indexOf("skew"))+u.substring(b).indexOf(")")+1,u=(v=u.substring(0,b))+d+(c=u.substring(h)),i.setAttribute("style",u))}}else u="transform: "+d+";",i.setAttribute("style",u)}return this},update:function(e){return this.options=this.parseSettings(e,this.options),this.skew(),this},destroy:function(){window.removeEventListener("resize",this.resizeEvent);for(var e=0;e<this.targets.length;e++){var t=this.targets[e],i=t.getAttribute("style"),s=i.indexOf("skew"),n=s+i.substring(s).indexOf(")")+1;if(s>-1){var o=i.substring(0,s),r=i.substring(n);t.setAttribute("style",o+r)}}},parseSettings:function(e,t){var i=void 0!==t?t:this.defaults;return void 0!==e&&(void 0!==e.x&&(i.x=e.x),void 0!==e.y&&(i.y=e.y),Array.isArray(e.breakpoints)&&(i.breakpoints=[],e.breakpoints.forEach(function(e){var t={break:void 0!==e.break?e.break:0};void 0!==e.x&&(t.x=e.x),void 0!==e.y&&(t.y=e.y),void 0!==e.debounce&&(t.debounce=e.debounce),void 0!==e.debounceTime&&(t.debounce=e.debounceTime),i.breakpoints.push(t)})),void 0!==e.debounce&&(i.debounce=e.debounce),void 0!==e.debounceTime&&(i.debounceTime=e.debounceTime)),i}};
